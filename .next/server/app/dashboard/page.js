(()=>{var e={};e.id=702,e.ids=[702],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},4407:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),t(9521),t(8748),t(5866);var r=t(3191),a=t(8716),i=t(7922),n=t.n(i),l=t(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let c=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9521)),"C:\\Users\\Clint\\Documents\\KiroCC\\app\\dashboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8748)),"C:\\Users\\Clint\\Documents\\KiroCC\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Clint\\Documents\\KiroCC\\app\\dashboard\\page.tsx"],m="/dashboard/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7510:(e,s,t)=>{Promise.resolve().then(t.bind(t,4442))},386:(e,s,t)=>{Promise.resolve().then(t.bind(t,1813))},4760:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},4442:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var r=t(326),a=t(7577),i=t(5442),n=t(6557);let l=(0,n.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),o=(0,n.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),c=(0,n.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),d=(0,n.Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),m=(0,n.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),u=(0,n.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function p({parentId:e,children:s,onClose:t,onSuccess:n}){let[l,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[m,p]=(0,a.useState)(10),[h,x]=(0,a.useState)(""),[g,f]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1),j=async s=>{s.preventDefault(),y(!0);try{let{error:s}=await i.O.from("chores").insert({title:l,description:c,points:m,parent_id:e,assigned_to:h||null,recurring:g});if(s)throw s;n()}catch(e){alert(e.message)}finally{y(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Create New Chore"}),r.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:r.jsx(u,{className:"w-6 h-6"})})]}),(0,r.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chore Title"}),r.jsx("input",{type:"text",value:l,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",placeholder:"e.g., Clean your room",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",rows:3,placeholder:"Detailed instructions for the chore",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points Reward"}),r.jsx("input",{type:"number",value:m,onChange:e=>p(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",min:1,max:100,required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assign to Child (optional)"}),(0,r.jsxs)("select",{value:h,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",children:[r.jsx("option",{value:"",children:"Any child can do this"}),s.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"recurring",checked:g,onChange:e=>f(e.target.checked),className:"mr-2"}),r.jsx("label",{htmlFor:"recurring",className:"text-sm text-gray-700",children:"This is a recurring chore"})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"flex-1 btn-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:b,className:"flex-1 btn-primary disabled:opacity-50",children:b?"Creating...":"Create Chore"})]})]})]})})}function h({parentId:e,onClose:s,onSuccess:t}){let[n,l]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(""),[p,h]=(0,a.useState)(!1),x=async s=>{s.preventDefault(),h(!0);try{let{data:s,error:r}=await i.O.auth.signUp({email:o,password:d,options:{data:{name:n,role:"child",parent_id:e}}});if(r)throw console.error("Auth error:",r),r;if(s.user){let{error:t}=await i.O.from("profiles").insert({id:s.user.id,email:o,name:n,role:"child",parent_id:e,points:0,rank:"recruit-rascal"});if(t)throw console.error("Profile error:",t),console.error("Trying to insert:",{id:s.user.id,email:o,name:n,role:"child",parent_id:e,points:0,rank:"recruit-rascal"}),t}t()}catch(e){console.error("Full error:",e),alert(`Error: ${e.message}`)}finally{h(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Add Child"}),r.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:r.jsx(u,{className:"w-6 h-6"})})]}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Child's Name"}),r.jsx("input",{type:"text",value:n,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (for child's account)"}),r.jsx("input",{type:"email",value:o,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password (for child's account)"}),r.jsx("input",{type:"password",value:d,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",required:!0,minLength:6})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:s,className:"flex-1 btn-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:p,className:"flex-1 btn-primary disabled:opacity-50",children:p?"Creating...":"Add Child"})]})]})]})})}let x=[{name:"Recruit",points:0,icon:"\uD83C\uDF96️",description:"Just starting your journey!"},{name:"Private",points:50,icon:"\uD83E\uDE96",description:"Learning the basics"},{name:"Corporal",points:150,icon:"⭐",description:"Showing leadership"},{name:"Sergeant",points:300,icon:"⭐⭐",description:"Reliable and skilled"},{name:"Lieutenant",points:500,icon:"⭐⭐⭐",description:"Leading by example"},{name:"Captain",points:750,icon:"\uD83C\uDF96️⭐",description:"Commanding respect"},{name:"Major",points:1e3,icon:"\uD83C\uDF96️⭐⭐",description:"Strategic thinker"},{name:"Colonel",points:1500,icon:"\uD83C\uDF96️⭐⭐⭐",description:"Exceptional leader"},{name:"General",points:2e3,icon:"\uD83D\uDC51",description:"Master of all tasks!"}];function g(e){for(let s=x.length-1;s>=0;s--)if(e>=x[s].points)return x[s];return x[0]}function f({parentId:e,onClose:s,onSuccess:t}){let[n,l]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(50),[p,h]=(0,a.useState)(""),[g,f]=(0,a.useState)(!1),b=async s=>{s.preventDefault(),f(!0);try{let{error:s}=await i.O.from("rewards").insert({title:n,description:o,points_required:d,parent_id:e,rank_required:p||null});if(s)throw s;t()}catch(e){alert(e.message)}finally{f(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Create New Reward"}),r.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:r.jsx(u,{className:"w-6 h-6"})})]}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reward Title"}),r.jsx("input",{type:"text",value:n,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",placeholder:"e.g., Extra screen time",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:o,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",rows:3,placeholder:"Details about the reward",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points Required"}),r.jsx("input",{type:"number",value:d,onChange:e=>m(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",min:1,required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Rank Required (optional)"}),(0,r.jsxs)("select",{value:p,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",children:[r.jsx("option",{value:"",children:"No rank requirement"}),x.map(e=>(0,r.jsxs)("option",{value:e.name,children:[e.icon," ",e.name]},e.name))]})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:s,className:"flex-1 btn-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:g,className:"flex-1 btn-primary disabled:opacity-50",children:g?"Creating...":"Create Reward"})]})]})]})})}function b({profile:e}){let[s,t]=(0,a.useState)([]),[n,u]=(0,a.useState)([]),[x,b]=(0,a.useState)([]),[y,j]=(0,a.useState)([]),[N,v]=(0,a.useState)(!1),[w,C]=(0,a.useState)(!1),[k,_]=(0,a.useState)(!1),S=async()=>{let{data:s}=await i.O.from("profiles").select("*").eq("parent_id",e.id).eq("role","child");t(s||[]);let{data:r}=await i.O.from("chores").select("*").eq("parent_id",e.id);u(r||[]);let{data:a,error:n}=await i.O.from("chore_completions").select("*").eq("status","pending");console.log("All pending completions:",a);let l=[];if(a)for(let s of a){let{data:t}=await i.O.from("chores").select("title, points, parent_id").eq("id",s.chore_id).single(),{data:r}=await i.O.from("profiles").select("name").eq("id",s.child_id).single();t?.parent_id===e.id&&l.push({...s,chores:t,profiles:r})}console.log("Enriched completions for parent:",l),console.log("Parent ID:",e.id),console.log("Completions error:",n),b(l);let{data:o}=await i.O.from("rewards").select("*").eq("parent_id",e.id);j(o||[])},q=async(s,t,r)=>{try{console.log("Approving completion:",{completionId:s,childId:t,points:r});let{error:a}=await i.O.from("chore_completions").update({status:"approved",approved_at:new Date().toISOString(),approved_by:e.id}).eq("id",s);if(a)throw console.error("Error updating completion:",a),a;let{data:n,error:l}=await i.O.from("profiles").select("points, name").eq("id",t).single();if(l)throw console.error("Error fetching child:",l),l;if(n){let e=n.points+r,s=g(e);console.log("Updating child:",{childId:t,oldPoints:n.points,newPoints:e,newRank:s.name});let{data:a,error:l}=await i.O.from("profiles").update({points:e,rank:s.name,updated_at:new Date().toISOString()}).eq("id",t).select();if(l)throw console.error("Error updating child profile:",l),l;console.log("Profile update result:",a);let{data:o}=await i.O.from("profiles").select("points, rank").eq("id",t).single();console.log("Verification query result:",o),alert(`✅ Approved! ${n.name} earned ${r} points and is now ${s.name}!`)}await S()}catch(e){console.error("Error approving completion:",e),alert(`Error approving chore: ${e instanceof Error?e.message:"Unknown error"}`)}},P=async s=>{try{await i.O.from("chore_completions").update({status:"rejected",approved_at:new Date().toISOString(),approved_by:e.id}).eq("id",s),S(),alert("❌ Chore completion rejected.")}catch(e){console.error("Error rejecting completion:",e),alert("Error rejecting chore. Please try again.")}};return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(l,{className:"w-8 h-8 text-army-600 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Children"}),r.jsx("p",{className:"text-2xl font-bold",children:s.length})]})]})}),r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(o,{className:"w-8 h-8 text-green-600 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Active Chores"}),r.jsx("p",{className:"text-2xl font-bold",children:n.length})]})]})}),r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(c,{className:"w-8 h-8 text-orange-600 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Pending Approvals"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:x.length})]})]})}),r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(d,{className:"w-8 h-8 text-yellow-600 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Rewards"}),r.jsx("p",{className:"text-2xl font-bold",children:y.length})]})]})})]}),"      ",(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsxs)("button",{onClick:()=>C(!0),className:"btn-primary flex items-center",children:[r.jsx(m,{className:"w-4 h-4 mr-2"}),"Add Child"]}),(0,r.jsxs)("button",{onClick:()=>v(!0),className:"btn-primary flex items-center",children:[r.jsx(m,{className:"w-4 h-4 mr-2"}),"Create Chore"]}),(0,r.jsxs)("button",{onClick:()=>_(!0),className:"btn-primary flex items-center",children:[r.jsx(m,{className:"w-4 h-4 mr-2"}),"Add Reward"]})]}),(0,r.jsxs)("div",{className:"card",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Your Children"}),0===s.length?r.jsx("p",{className:"text-gray-600",children:'No children added yet. Click "Add Child" to get started!'}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>{let s=g(e.points);return(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-lg",children:e.name}),r.jsx("div",{className:"mt-2",children:(0,r.jsxs)("span",{className:"rank-badge bg-indigo-600 text-white",children:[s.icon," ",s.name]})}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[e.points," points"]})]},e.id)})})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["Pending Approvals (",x.length,")"]}),0===x.length?r.jsx("p",{className:"text-gray-600",children:"No pending approvals at the moment."}):r.jsx("div",{className:"space-y-3",children:x.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:e.chores?.title||"Unknown Chore"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Completed by ",e.profiles?.name||"Unknown Child"]}),(0,r.jsxs)("p",{className:"text-sm text-army-600 font-medium",children:["+",e.chores?.points||0," points"]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>q(e.id,e.child_id,e.chores?.points||0),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm",children:"✅ Approve"}),r.jsx("button",{onClick:()=>P(e.id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm",children:"❌ Reject"})]})]},e.id))})]}),w&&r.jsx(h,{parentId:e.id,onClose:()=>C(!1),onSuccess:()=>{C(!1),S()}}),N&&r.jsx(p,{parentId:e.id,children:s,onClose:()=>v(!1),onSuccess:()=>{v(!1),S()}}),k&&r.jsx(f,{parentId:e.id,onClose:()=>_(!1),onSuccess:()=>{_(!1),S()}})]})}var y=t(3734);function j({profile:e,onProfileUpdate:s}){let[t,n]=(0,a.useState)([]),[l,m]=(0,a.useState)([]),[u,p]=(0,a.useState)([]),[h,f]=(0,a.useState)(e),b=async()=>{console.log("Fetching profile data for ID:",e.id);let{data:t,error:r}=await i.O.from("profiles").select("*").eq("id",e.id).single();r?console.error("Error fetching profile:",r):(console.log("Previous profile data:",h),console.log("New profile data from DB:",t),t.points!==h.points&&console.log(`Points changed: ${h.points} → ${t.points}`),f(t),s&&s())},j=async()=>{let{data:e}=await i.O.from("chores").select("*").or(`assigned_to.is.null,assigned_to.eq.${h.id}`);n(e||[]);let{data:s}=await i.O.from("chore_completions").select(`
        *,
        chores (title, points)
      `).eq("child_id",h.id).order("completed_at",{ascending:!1});m(s||[]),g(h.points);let{data:t}=await i.O.from("rewards").select("*").eq("parent_id",h.parent_id).lte("points_required",h.points);p(t||[])},N=async e=>{await i.O.from("chore_completions").insert({chore_id:e,child_id:h.id,status:"pending"}),j()},v=g(h.points),w=function(e){let s=g(e),t=x.findIndex(e=>e.name===s.name);return t<x.length-1?x[t+1]:null}(h.points),C=w?(h.points-v.points)/(w.points-v.points)*100:100;return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-army-800 mb-2",children:["Welcome to your Mission Hub, ",h.name,"!"]}),(0,r.jsxs)("div",{className:"flex justify-center items-center space-x-4 mb-4",children:[(0,r.jsxs)("span",{className:"rank-badge bg-indigo-600 text-white text-lg",children:[v.icon," ",v.name]}),(0,r.jsxs)("span",{className:"text-xl font-semibold text-army-600",children:[h.points," Points"]})]}),r.jsx("button",{onClick:()=>{b(),j()},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm",children:"\uD83D\uDD04 Refresh Progress"})]}),(0,r.jsxs)("div",{className:"card",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Rank Progress"}),w?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("span",{className:"text-sm font-medium",children:["Progress to ",w.name]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[h.points," / ",w.points," points"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:"bg-army-600 h-3 rounded-full transition-all duration-300",style:{width:`${C}%`}})}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:[w.points-h.points," points to go!"]})]}):(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(d,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold",children:"Congratulations!"}),r.jsx("p",{className:"text-gray-600",children:"You've reached the highest rank!"})]})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[r.jsx(y.Z,{className:"w-6 h-6 text-yellow-500 mr-2"}),"Available Missions"]}),0===t.length?r.jsx("p",{className:"text-gray-600",children:"No missions available right now. Check back later!"}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsx("h3",{className:"font-semibold text-lg",children:e.title}),r.jsx("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-army-600 font-semibold",children:["+",e.points," points"]}),r.jsx("button",{onClick:()=>N(e.id),className:"btn-primary text-sm",children:"Complete Mission"})]})]},e.id))})]}),"      ",u.length>0&&(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[r.jsx(d,{className:"w-6 h-6 text-yellow-500 mr-2"}),"Available Rewards"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-4 bg-yellow-50",children:[r.jsx("h3",{className:"font-semibold text-lg",children:e.title}),r.jsx("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-yellow-600 font-semibold",children:[e.points_required," points"]}),r.jsx("span",{className:"text-green-600 font-semibold",children:"✓ Unlocked!"})]})]},e.id))})]}),(0,r.jsxs)("div",{className:"card",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Recent Activity"}),0===l.length?r.jsx("p",{className:"text-gray-600",children:"No completed missions yet. Start your first mission above!"}):r.jsx("div",{className:"space-y-3",children:l.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center",children:["approved"===e.status?r.jsx(o,{className:"w-5 h-5 text-green-500 mr-3"}):r.jsx(c,{className:"w-5 h-5 text-yellow-500 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:e.chores?.title}),r.jsx("p",{className:"text-sm text-gray-600",children:"approved"===e.status?"Approved":"Waiting for approval"})]})]}),(0,r.jsxs)("span",{className:"text-army-600 font-semibold",children:["+",e.chores?.points," points"]})]},e.id))})]})]})}function N(){let[e,s]=(0,a.useState)(null),[t,n]=(0,a.useState)(null),[l,o]=(0,a.useState)(!0),c=async()=>{if(e){let{data:s}=await i.O.from("profiles").select("*").eq("id",e.id).single();n(s)}},d=async()=>{await i.O.auth.signOut()};return l?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"text-xl",children:"Loading..."})}):e&&t?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow-sm border-b",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-army-800",children:"Chore Champion"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:["Welcome, ",t.name,"!"]}),r.jsx("button",{onClick:d,className:"btn-secondary text-sm",children:"Sign Out"})]})]})}),r.jsx("main",{className:"container mx-auto px-4 py-8",children:"parent"===t.role?r.jsx(b,{profile:t}):r.jsx(j,{profile:t,onProfileUpdate:c})})]}):(window.location.href="/",null)}},1813:(e,s,t)=>{"use strict";t.d(s,{AuthProvider:()=>l,a:()=>o});var r=t(326),a=t(7577),i=t(3958);let n=(0,a.createContext)(void 0);function l({children:e}){let[s,t]=(0,a.useState)(null),[l,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(!0),p=async()=>{await i.O.auth.signOut()};return r.jsx(n.Provider,{value:{user:s,session:l,profile:c,loading:m,signOut:p},children:e})}function o(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5442:(e,s,t)=>{"use strict";t.d(s,{O:()=>l});var r=t(7939);let a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh0dnN3Y3VmaHNwdHFkc2NpeXZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5ODA3NjQsImV4cCI6MjA3MDU1Njc2NH0.rn_6nkpTd_53aZ-wvoqrutHsuZnep3AqfKu7K7vvBvI",i=function(e){if(!e||e.includes("your_supabase_project_url")||e.includes("placeholder"))return"https://placeholder.supabase.co";let s=e.endsWith("/")?e.slice(0,-1):e;if(s.includes(".supabase.co"))return s;try{return new URL(s),s}catch{return"https://placeholder.supabase.co"}}("https://htvswcufhsptqdsciyvh.supabase.co"),n=a.includes("your_supabase_anon_key")?"placeholder-key":a,l=(0,r.eI)(i,n)},6557:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var r=t(7577),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,s)=>{let t=(0,r.forwardRef)(({color:t="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,...m},u)=>(0,r.createElement)("svg",{ref:u,...a,width:n,height:n,stroke:t,strokeWidth:o?24*Number(l)/Number(n):l,className:["lucide",`lucide-${i(e)}`,c].join(" "),...m},[...s.map(([e,s])=>(0,r.createElement)(e,s)),...Array.isArray(d)?d:[d]]));return t.displayName=`${e}`,t}},3734:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},3958:(e,s,t)=>{"use strict";t.d(s,{O:()=>l});var r=t(7939);let a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh0dnN3Y3VmaHNwdHFkc2NpeXZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5ODA3NjQsImV4cCI6MjA3MDU1Njc2NH0.rn_6nkpTd_53aZ-wvoqrutHsuZnep3AqfKu7K7vvBvI",i=function(e){if(!e||e.includes("your_supabase_project_url")||e.includes("placeholder"))return"https://placeholder.supabase.co";let s=e.endsWith("/")?e.slice(0,-1):e;if(s.includes(".supabase.co"))return s;try{return new URL(s),s}catch{return"https://placeholder.supabase.co"}}("https://htvswcufhsptqdsciyvh.supabase.co"),n=a.includes("your_supabase_anon_key")?"placeholder-key":a,l=(0,r.eI)(i,n)},9521:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`C:\Users\Clint\Documents\KiroCC\app\dashboard\page.tsx#default`)},8748:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c,metadata:()=>o});var r=t(9510),a=t(7366),i=t.n(a);t(7272);var n=t(8570);let l=(0,n.createProxy)(String.raw`C:\Users\Clint\Documents\KiroCC\lib\auth-context.tsx#AuthProvider`);(0,n.createProxy)(String.raw`C:\Users\Clint\Documents\KiroCC\lib\auth-context.tsx#useAuth`);let o={title:"Chore Champion",description:"Gamifying Family Chores"};function c({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:i().className,children:r.jsx(l,{children:e})})})}},7272:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,721],()=>t(4407));module.exports=r})();