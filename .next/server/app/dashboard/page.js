(()=>{var e={};e.id=702,e.ids=[702],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},4407:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c}),t(9521),t(8748),t(5866);var r=t(3191),a=t(8716),i=t(7922),l=t.n(i),n=t(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let c=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9521)),"C:\\Users\\Clint\\Documents\\KiroCC\\app\\dashboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8748)),"C:\\Users\\Clint\\Documents\\KiroCC\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Clint\\Documents\\KiroCC\\app\\dashboard\\page.tsx"],m="/dashboard/page",u={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7510:(e,s,t)=>{Promise.resolve().then(t.bind(t,7904))},386:(e,s,t)=>{Promise.resolve().then(t.bind(t,1813))},4760:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},7904:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S});var r=t(326),a=t(7577),i=t(5442),l=t(6557);let n=(0,l.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),o=(0,l.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),c=(0,l.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),d=(0,l.Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),m=(0,l.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),u=(0,l.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function h({parentId:e,children:s,onClose:t,onSuccess:l}){let[n,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[m,h]=(0,a.useState)(10),[p,x]=(0,a.useState)(""),[g,b]=(0,a.useState)(!1),[f,y]=(0,a.useState)(!1),j=async s=>{s.preventDefault(),y(!0);try{let{error:s}=await i.O.from("chores").insert({title:n,description:c,points:m,parent_id:e,assigned_to:p||null,recurring:g});if(s)throw s;l()}catch(e){alert(e.message)}finally{y(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Create New Chore"}),r.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:r.jsx(u,{className:"w-6 h-6"})})]}),(0,r.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chore Title"}),r.jsx("input",{type:"text",value:n,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",placeholder:"e.g., Clean your room",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",rows:3,placeholder:"Detailed instructions for the chore",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points Reward"}),r.jsx("input",{type:"number",value:m,onChange:e=>h(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",min:1,max:100,required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assign to Child (optional)"}),(0,r.jsxs)("select",{value:p,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",children:[r.jsx("option",{value:"",children:"Any child can do this"}),s.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"recurring",checked:g,onChange:e=>b(e.target.checked),className:"mr-2"}),r.jsx("label",{htmlFor:"recurring",className:"text-sm text-gray-700",children:"This is a recurring chore"})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"flex-1 btn-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:f,className:"flex-1 btn-primary disabled:opacity-50",children:f?"Creating...":"Create Chore"})]})]})]})})}function p({parentId:e,onClose:s,onSuccess:t}){let[l,n]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(""),[h,p]=(0,a.useState)(!1),x=async s=>{s.preventDefault(),p(!0);try{let{data:s,error:r}=await i.O.auth.signUp({email:o,password:d,options:{data:{name:l,role:"child",parent_id:e}}});if(r)throw console.error("Auth error:",r),r;if(s.user){let{error:t}=await i.O.from("profiles").insert({id:s.user.id,email:o,name:l,role:"child",parent_id:e,points:0,rank:"recruit-rascal"});if(t)throw console.error("Profile error:",t),console.error("Trying to insert:",{id:s.user.id,email:o,name:l,role:"child",parent_id:e,points:0,rank:"recruit-rascal"}),t}t()}catch(e){console.error("Full error:",e),alert(`Error: ${e.message}`)}finally{p(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Add Child"}),r.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:r.jsx(u,{className:"w-6 h-6"})})]}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Child's Name"}),r.jsx("input",{type:"text",value:l,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (for child's account)"}),r.jsx("input",{type:"email",value:o,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password (for child's account)"}),r.jsx("input",{type:"password",value:d,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",required:!0,minLength:6})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:s,className:"flex-1 btn-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:h,className:"flex-1 btn-primary disabled:opacity-50",children:h?"Creating...":"Add Child"})]})]})]})})}let x=[{id:"recruit-rascal",name:"Recruit Rascal",pointsRequired:0,description:"Just starting your chore journey!",color:"bg-gray-500",icon:"\uD83C\uDF96️"},{id:"task-trooper",name:"Task Trooper",pointsRequired:50,description:"Getting the hang of helping out!",color:"bg-green-500",icon:"⭐"},{id:"chore-corporal",name:"Chore Corporal",pointsRequired:150,description:"A reliable helper around the house!",color:"bg-blue-500",icon:"\uD83C\uDFC5"},{id:"duty-sergeant",name:"Duty Sergeant",pointsRequired:300,description:"Leading by example in responsibility!",color:"bg-purple-500",icon:"\uD83C\uDF97️"},{id:"mission-major",name:"Mission Major",pointsRequired:500,description:"A true household hero!",color:"bg-orange-500",icon:"\uD83C\uDFC6"},{id:"captain-clean",name:"Captain Clean",pointsRequired:750,description:"Master of maintaining order!",color:"bg-red-500",icon:"\uD83D\uDC51"},{id:"colonel-capable",name:"Colonel Capable",pointsRequired:1e3,description:"Exceptionally skilled and dependable!",color:"bg-indigo-500",icon:"\uD83D\uDC8E"},{id:"general-great",name:"General Great",pointsRequired:1500,description:"A legendary household leader!",color:"bg-yellow-500",icon:"⚡"},{id:"supreme-commander",name:"Supreme Commander",pointsRequired:2e3,description:"The ultimate chore champion!",color:"bg-gradient-to-r from-purple-500 to-pink-500",icon:"\uD83C\uDF1F"}];function g(e){return[...x].sort((e,s)=>s.pointsRequired-e.pointsRequired).find(s=>e>=s.pointsRequired)||x[0]}function b({parentId:e,onClose:s,onSuccess:t}){let[l,n]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(50),[h,p]=(0,a.useState)(""),[g,b]=(0,a.useState)(!1),f=async s=>{s.preventDefault(),b(!0);try{let{error:s}=await i.O.from("rewards").insert({title:l,description:o,points_required:d,parent_id:e,rank_required:h||null});if(s)throw s;t()}catch(e){alert(e.message)}finally{b(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Create New Reward"}),r.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:r.jsx(u,{className:"w-6 h-6"})})]}),(0,r.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reward Title"}),r.jsx("input",{type:"text",value:l,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",placeholder:"e.g., Extra screen time",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:o,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",rows:3,placeholder:"Details about the reward",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points Required"}),r.jsx("input",{type:"number",value:d,onChange:e=>m(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",min:1,required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Rank Required (optional)"}),(0,r.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",children:[r.jsx("option",{value:"",children:"No rank requirement"}),x.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.icon," ",e.name]},e.id))]})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:s,className:"flex-1 btn-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:g,className:"flex-1 btn-primary disabled:opacity-50",children:g?"Creating...":"Create Reward"})]})]})]})})}function f({profile:e}){let[s,t]=(0,a.useState)([]),[l,u]=(0,a.useState)([]),[x,f]=(0,a.useState)([]),[y,j]=(0,a.useState)([]),[v,N]=(0,a.useState)(!1),[w,C]=(0,a.useState)(!1),[k,q]=(0,a.useState)(!1),S=async()=>{let{data:s}=await i.O.from("profiles").select("*").eq("parent_id",e.id).eq("role","child");t(s||[]);let{data:r}=await i.O.from("chores").select("*").eq("parent_id",e.id);u(r||[]);let{data:a,error:l}=await i.O.from("chore_completions").select("*").eq("status","pending");console.log("All pending completions:",a);let n=[];if(a)for(let s of a){let{data:t}=await i.O.from("chores").select("title, points, parent_id").eq("id",s.chore_id).single(),{data:r}=await i.O.from("profiles").select("name").eq("id",s.child_id).single();t?.parent_id===e.id&&n.push({...s,chores:t,profiles:r})}console.log("Enriched completions for parent:",n),console.log("Parent ID:",e.id),console.log("Completions error:",l),f(n);let{data:o}=await i.O.from("rewards").select("*").eq("parent_id",e.id);j(o||[])},_=async(s,t,r)=>{try{console.log("Approving completion:",{completionId:s,childId:t,points:r});let{error:a}=await i.O.from("chore_completions").update({status:"approved",approved_at:new Date().toISOString(),approved_by:e.id}).eq("id",s);if(a)throw console.error("Error updating completion:",a),a;let{data:l,error:n}=await i.O.from("profiles").select("points, name").eq("id",t).single();if(n)throw console.error("Error fetching child:",n),n;if(l){let e=l.points+r,s=g(e);console.log("Updating child:",{childId:t,oldPoints:l.points,newPoints:e,newRank:s.name});let{data:a,error:n}=await i.O.from("profiles").update({points:e,rank:s.id,updated_at:new Date().toISOString()}).eq("id",t).select();if(n)throw console.error("Error updating child profile:",n),n;console.log("Profile update result:",a);let{data:o}=await i.O.from("profiles").select("points, rank").eq("id",t).single();console.log("Verification query result:",o),alert(`✅ Approved! ${l.name} earned ${r} points and is now ${s.name}!`)}await S()}catch(e){console.error("Error approving completion:",e),alert(`Error approving chore: ${e instanceof Error?e.message:"Unknown error"}`)}},D=async s=>{try{await i.O.from("chore_completions").update({status:"rejected",approved_at:new Date().toISOString(),approved_by:e.id}).eq("id",s),S(),alert("❌ Chore completion rejected.")}catch(e){console.error("Error rejecting completion:",e),alert("Error rejecting chore. Please try again.")}};return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(n,{className:"w-8 h-8 text-army-600 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Children"}),r.jsx("p",{className:"text-2xl font-bold",children:s.length})]})]})}),r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(o,{className:"w-8 h-8 text-green-600 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Active Chores"}),r.jsx("p",{className:"text-2xl font-bold",children:l.length})]})]})}),r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(c,{className:"w-8 h-8 text-orange-600 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Pending Approvals"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:x.length})]})]})}),r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(d,{className:"w-8 h-8 text-yellow-600 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Rewards"}),r.jsx("p",{className:"text-2xl font-bold",children:y.length})]})]})})]}),"      ",(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsxs)("button",{onClick:()=>C(!0),className:"btn-primary flex items-center",children:[r.jsx(m,{className:"w-4 h-4 mr-2"}),"Add Child"]}),(0,r.jsxs)("button",{onClick:()=>N(!0),className:"btn-primary flex items-center",children:[r.jsx(m,{className:"w-4 h-4 mr-2"}),"Create Chore"]}),(0,r.jsxs)("button",{onClick:()=>q(!0),className:"btn-primary flex items-center",children:[r.jsx(m,{className:"w-4 h-4 mr-2"}),"Add Reward"]})]}),(0,r.jsxs)("div",{className:"card",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Your Children"}),0===s.length?r.jsx("p",{className:"text-gray-600",children:'No children added yet. Click "Add Child" to get started!'}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>{let s=g(e.points);return(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-lg",children:e.name}),r.jsx("div",{className:"mt-2",children:(0,r.jsxs)("span",{className:`rank-badge ${s.color} text-white`,children:[s.icon," ",s.name]})}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[e.points," points"]})]},e.id)})})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["Pending Approvals (",x.length,")"]}),0===x.length?r.jsx("p",{className:"text-gray-600",children:"No pending approvals at the moment."}):r.jsx("div",{className:"space-y-3",children:x.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:e.chores?.title||"Unknown Chore"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Completed by ",e.profiles?.name||"Unknown Child"]}),(0,r.jsxs)("p",{className:"text-sm text-army-600 font-medium",children:["+",e.chores?.points||0," points"]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>_(e.id,e.child_id,e.chores?.points||0),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm",children:"✅ Approve"}),r.jsx("button",{onClick:()=>D(e.id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm",children:"❌ Reject"})]})]},e.id))})]}),w&&r.jsx(p,{parentId:e.id,onClose:()=>C(!1),onSuccess:()=>{C(!1),S()}}),v&&r.jsx(h,{parentId:e.id,children:s,onClose:()=>N(!1),onSuccess:()=>{N(!1),S()}}),k&&r.jsx(b,{parentId:e.id,onClose:()=>q(!1),onSuccess:()=>{q(!1),S()}})]})}var y=t(3734);let j=(0,l.Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),v=(0,l.Z)("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),N=(0,l.Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),w=[{id:"superhero",name:"Superhero",icon:"\uD83E\uDDB8‍♂️"},{id:"robot",name:"Robot",icon:"\uD83E\uDD16"},{id:"wizard",name:"Wizard",icon:"\uD83E\uDDD9‍♂️"},{id:"pirate",name:"Pirate",icon:"\uD83C\uDFF4‍☠️"}],C=["Great job on completing your missions! You're becoming a true Chore Champion!","I'm proud of how responsible you're being. Keep up the excellent work!","You're making amazing progress! Your family is lucky to have such a helpful member.","Every chore you complete makes you stronger and more capable. You're doing fantastic!","I can see you're working hard to reach the next rank. You're almost there!"];function k({profile:e}){let[s,t]=(0,a.useState)("superhero"),[i,l]=(0,a.useState)(!1),[n,o]=(0,a.useState)(""),c=w.find(e=>e.id===s)||w[0];return(0,r.jsxs)("div",{className:"card bg-gradient-to-r from-blue-50 to-purple-50",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[r.jsx(j,{className:"w-6 h-6 text-blue-600 mr-2"}),r.jsx("h2",{className:"text-xl font-semibold",children:"AI Voice Coach"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose your coach:"}),r.jsx("div",{className:"flex space-x-2",children:w.map(e=>(0,r.jsxs)("button",{onClick:()=>t(e.id),className:`p-3 rounded-lg border-2 transition-colors ${s===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("div",{className:"text-2xl mb-1",children:e.icon}),r.jsx("div",{className:"text-xs font-medium",children:e.name})]},e.id))})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"text-3xl mr-3",children:c.icon}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-semibold",children:[c.name," Coach"]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Ready to encourage you!"})]})]}),r.jsx("button",{onClick:()=>{o(C[Math.floor(Math.random()*C.length)]),l(!0),setTimeout(()=>{l(!1)},3e3)},disabled:i,className:`flex items-center px-4 py-2 rounded-lg transition-colors ${i?"bg-gray-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:i?(0,r.jsxs)(r.Fragment,{children:[r.jsx(v,{className:"w-4 h-4 mr-2 animate-pulse"}),"Speaking..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(N,{className:"w-4 h-4 mr-2"}),"Get Encouragement"]})})]}),n&&r.jsx("div",{className:"p-4 bg-blue-100 rounded-lg border-l-4 border-blue-500",children:(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx("div",{className:"text-2xl mr-3",children:c.icon}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-medium text-blue-800 mb-1",children:[c.name," says:"]}),r.jsx("p",{className:"text-blue-700",children:n})]})]})}),r.jsx("div",{className:"text-xs text-gray-500 text-center",children:"\uD83D\uDCA1 Tip: Your AI coach can provide personalized encouragement and help you stay motivated!"})]})]})}function q({profile:e,onProfileUpdate:s}){var t;let[l,n]=(0,a.useState)([]),[m,u]=(0,a.useState)([]),[h,p]=(0,a.useState)([]),[b,f]=(0,a.useState)(e),j=async()=>{console.log("Fetching profile data for ID:",e.id);let{data:t,error:r}=await i.O.from("profiles").select("*").eq("id",e.id).single();r?console.error("Error fetching profile:",r):(console.log("Previous profile data:",b),console.log("New profile data from DB:",t),t.points!==b.points&&console.log(`Points changed: ${b.points} → ${t.points}`),f(t),s&&s())},v=async()=>{let{data:e}=await i.O.from("chores").select("*").or(`assigned_to.is.null,assigned_to.eq.${b.id}`);n(e||[]);let{data:s}=await i.O.from("chore_completions").select(`
        *,
        chores (title, points)
      `).eq("child_id",b.id).order("completed_at",{ascending:!1});u(s||[]),g(b.points);let{data:t}=await i.O.from("rewards").select("*").eq("parent_id",b.parent_id).lte("points_required",b.points);p(t||[])},N=async e=>{await i.O.from("chore_completions").insert({chore_id:e,child_id:b.id,status:"pending"}),v()},w=g(b.points),C=(t=b.points,[...x].sort((e,s)=>e.pointsRequired-s.pointsRequired).find(e=>t<e.pointsRequired)||null),q=C?(b.points-w.pointsRequired)/(C.pointsRequired-w.pointsRequired)*100:100;return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-army-800 mb-2",children:["Welcome to your Mission Hub, ",b.name,"!"]}),(0,r.jsxs)("div",{className:"flex justify-center items-center space-x-4 mb-4",children:[(0,r.jsxs)("span",{className:`rank-badge ${w.color} text-white text-lg`,children:[w.icon," ",w.name]}),(0,r.jsxs)("span",{className:"text-xl font-semibold text-army-600",children:[b.points," Points"]})]}),r.jsx("button",{onClick:()=>{j(),v()},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm",children:"\uD83D\uDD04 Refresh Progress"})]}),(0,r.jsxs)("div",{className:"card",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Rank Progress"}),C?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("span",{className:"text-sm font-medium",children:["Progress to ",C.name]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[b.points," / ",C.pointsRequired," points"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:"bg-army-600 h-3 rounded-full transition-all duration-300",style:{width:`${q}%`}})}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:[C.pointsRequired-b.points," points to go!"]})]}):(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(d,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold",children:"Congratulations!"}),r.jsx("p",{className:"text-gray-600",children:"You've reached the highest rank!"})]})]}),r.jsx(k,{profile:b}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[r.jsx(y.Z,{className:"w-6 h-6 text-yellow-500 mr-2"}),"Available Missions"]}),0===l.length?r.jsx("p",{className:"text-gray-600",children:"No missions available right now. Check back later!"}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsx("h3",{className:"font-semibold text-lg",children:e.title}),r.jsx("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-army-600 font-semibold",children:["+",e.points," points"]}),r.jsx("button",{onClick:()=>N(e.id),className:"btn-primary text-sm",children:"Complete Mission"})]})]},e.id))})]}),"      ",h.length>0&&(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[r.jsx(d,{className:"w-6 h-6 text-yellow-500 mr-2"}),"Available Rewards"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-4 bg-yellow-50",children:[r.jsx("h3",{className:"font-semibold text-lg",children:e.title}),r.jsx("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-yellow-600 font-semibold",children:[e.points_required," points"]}),r.jsx("span",{className:"text-green-600 font-semibold",children:"✓ Unlocked!"})]})]},e.id))})]}),(0,r.jsxs)("div",{className:"card",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Recent Activity"}),0===m.length?r.jsx("p",{className:"text-gray-600",children:"No completed missions yet. Start your first mission above!"}):r.jsx("div",{className:"space-y-3",children:m.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center",children:["approved"===e.status?r.jsx(o,{className:"w-5 h-5 text-green-500 mr-3"}):r.jsx(c,{className:"w-5 h-5 text-yellow-500 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:e.chores?.title}),r.jsx("p",{className:"text-sm text-gray-600",children:"approved"===e.status?"Approved":"Waiting for approval"})]})]}),(0,r.jsxs)("span",{className:"text-army-600 font-semibold",children:["+",e.chores?.points," points"]})]},e.id))})]})]})}function S(){let[e,s]=(0,a.useState)(null),[t,l]=(0,a.useState)(null),[n,o]=(0,a.useState)(!0),c=async()=>{if(e){let{data:s}=await i.O.from("profiles").select("*").eq("id",e.id).single();l(s)}},d=async()=>{await i.O.auth.signOut()};return n?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"text-xl",children:"Loading..."})}):e&&t?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow-sm border-b",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-army-800",children:"Chore Champion"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:["Welcome, ",t.name,"!"]}),r.jsx("button",{onClick:d,className:"btn-secondary text-sm",children:"Sign Out"})]})]})}),r.jsx("main",{className:"container mx-auto px-4 py-8",children:"parent"===t.role?r.jsx(f,{profile:t}):r.jsx(q,{profile:t,onProfileUpdate:c})})]}):(window.location.href="/",null)}},1813:(e,s,t)=>{"use strict";t.d(s,{AuthProvider:()=>n,a:()=>o});var r=t(326),a=t(7577),i=t(3958);let l=(0,a.createContext)(void 0);function n({children:e}){let[s,t]=(0,a.useState)(null),[n,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(!0),h=async()=>{await i.O.auth.signOut()};return r.jsx(l.Provider,{value:{user:s,profile:n,session:c,loading:m,signOut:h},children:e})}function o(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5442:(e,s,t)=>{"use strict";t.d(s,{O:()=>l});var r=t(7939);let a="https://htvswcufhsptqdsciyvh.supabase.co",i=a;i=a.includes("your_supabase_project_url")||a.includes("placeholder")?"https://placeholder.supabase.co":a.endsWith("/")?a.slice(0,-1):a;let l=(0,r.eI)(i,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh0dnN3Y3VmaHNwdHFkc2NpeXZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5ODA3NjQsImV4cCI6MjA3MDU1Njc2NH0.rn_6nkpTd_53aZ-wvoqrutHsuZnep3AqfKu7K7vvBvI")},6557:(e,s,t)=>{"use strict";t.d(s,{Z:()=>l});var r=t(7577),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,s)=>{let t=(0,r.forwardRef)(({color:t="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:d,...m},u)=>(0,r.createElement)("svg",{ref:u,...a,width:l,height:l,stroke:t,strokeWidth:o?24*Number(n)/Number(l):n,className:["lucide",`lucide-${i(e)}`,c].join(" "),...m},[...s.map(([e,s])=>(0,r.createElement)(e,s)),...Array.isArray(d)?d:[d]]));return t.displayName=`${e}`,t}},3734:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},3958:(e,s,t)=>{"use strict";t.d(s,{O:()=>n});var r=t(7939);let a="https://htvswcufhsptqdsciyvh.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh0dnN3Y3VmaHNwdHFkc2NpeXZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5ODA3NjQsImV4cCI6MjA3MDU1Njc2NH0.rn_6nkpTd_53aZ-wvoqrutHsuZnep3AqfKu7K7vvBvI";!process.env.NETLIFY&&(a.includes("placeholder")||i.includes("placeholder"))&&console.warn("Using placeholder Supabase credentials. Set proper environment variables for production.");let l=a;l=a.includes("your_supabase_project_url")||a.includes("placeholder")?"https://placeholder.supabase.co":a.endsWith("/")?a.slice(0,-1):a;let n=(0,r.eI)(l,i)},9521:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`C:\Users\Clint\Documents\KiroCC\app\dashboard\page.tsx#default`)},8748:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c,metadata:()=>o});var r=t(9510),a=t(7366),i=t.n(a);t(7272);var l=t(8570);let n=(0,l.createProxy)(String.raw`C:\Users\Clint\Documents\KiroCC\lib\auth-context.tsx#AuthProvider`);(0,l.createProxy)(String.raw`C:\Users\Clint\Documents\KiroCC\lib\auth-context.tsx#useAuth`);let o={title:"Chore Champion",description:"Gamifying Family Chores"};function c({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:i().className,children:r.jsx(n,{children:e})})})}},7272:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,721],()=>t(4407));module.exports=r})();