(()=>{var e={};e.id=702,e.ids=[702],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4407:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d}),t(9521),t(1506),t(5866);var r=t(3191),a=t(8716),n=t(7922),o=t.n(n),i=t(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(s,l);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9521)),"C:\\Users\\Clint\\Documents\\KiroCC\\app\\dashboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1506)),"C:\\Users\\Clint\\Documents\\KiroCC\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Clint\\Documents\\KiroCC\\app\\dashboard\\page.tsx"],m="/dashboard/page",u={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7510:(e,s,t)=>{Promise.resolve().then(t.bind(t,4662))},4760:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},5212:()=>{},4662:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>O});var r=t(326),a=t(7577),n=t(6557);let o=(0,n.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),i=(0,n.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),l=(0,n.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),d=(0,n.Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),c=(0,n.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),m=(0,n.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function u({parentId:e,children:s,onClose:t,onSuccess:n}){let[o,i]=(0,a.useState)(""),[l,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(10),[h,x]=(0,a.useState)(""),[p,b]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!1),j=async s=>{s.preventDefault(),g(!0);try{let{error:s}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("chores").insert({title:o,description:l,points:c,parent_id:e,assigned_to:h||null,recurring:p});if(s)throw s;n()}catch(e){alert(e.message)}finally{g(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Create New Chore"}),r.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:r.jsx(m,{className:"w-6 h-6"})})]}),(0,r.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chore Title"}),r.jsx("input",{type:"text",value:o,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",placeholder:"e.g., Clean your room",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:l,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",rows:3,placeholder:"Detailed instructions for the chore",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points Reward"}),r.jsx("input",{type:"number",value:c,onChange:e=>u(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",min:1,max:100,required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assign to Child (optional)"}),(0,r.jsxs)("select",{value:h,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",children:[r.jsx("option",{value:"",children:"Any child can do this"}),s.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"recurring",checked:p,onChange:e=>b(e.target.checked),className:"mr-2"}),r.jsx("label",{htmlFor:"recurring",className:"text-sm text-gray-700",children:"This is a recurring chore"})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"flex-1 btn-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:f,className:"flex-1 btn-primary disabled:opacity-50",children:f?"Creating...":"Create Chore"})]})]})]})})}function h({parentId:e,onClose:s,onSuccess:t}){let[n,o]=(0,a.useState)(""),[i,l]=(0,a.useState)(""),[d,c]=(0,a.useState)(""),[u,h]=(0,a.useState)(!1),x=async s=>{s.preventDefault(),h(!0);try{let{data:s,error:r}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).auth.signUp({email:i,password:d,options:{data:{name:n,role:"child",parent_id:e}}});if(r)throw console.error("Auth error:",r),r;if(s.user){let{error:t}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("profiles").insert({id:s.user.id,email:i,name:n,role:"child",parent_id:e,points:0,rank:"recruit-rascal"});if(t)throw console.error("Profile error:",t),console.error("Trying to insert:",{id:s.user.id,email:i,name:n,role:"child",parent_id:e,points:0,rank:"recruit-rascal"}),t}t()}catch(e){console.error("Full error:",e),alert(`Error: ${e.message}`)}finally{h(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Add Child"}),r.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:r.jsx(m,{className:"w-6 h-6"})})]}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Child's Name"}),r.jsx("input",{type:"text",value:n,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (for child's account)"}),r.jsx("input",{type:"email",value:i,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password (for child's account)"}),r.jsx("input",{type:"password",value:d,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",required:!0,minLength:6})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:s,className:"flex-1 btn-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:u,className:"flex-1 btn-primary disabled:opacity-50",children:u?"Creating...":"Add Child"})]})]})]})})}function x({parentId:e,onClose:s,onSuccess:t}){let[n,o]=(0,a.useState)(""),[i,l]=(0,a.useState)(""),[d,c]=(0,a.useState)(50),[u,h]=(0,a.useState)(""),[x,p]=(0,a.useState)(!1),b=async s=>{s.preventDefault(),p(!0);try{let{error:s}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("rewards").insert({title:n,description:i,points_required:d,parent_id:e,rank_required:u||null});if(s)throw s;t()}catch(e){alert(e.message)}finally{p(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Create New Reward"}),r.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:r.jsx(m,{className:"w-6 h-6"})})]}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reward Title"}),r.jsx("input",{type:"text",value:n,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",placeholder:"e.g., Extra screen time",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:i,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",rows:3,placeholder:"Details about the reward",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points Required"}),r.jsx("input",{type:"number",value:d,onChange:e=>c(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",min:1,required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Rank Required (optional)"}),(0,r.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-army-500",children:[r.jsx("option",{value:"",children:"No rank requirement"}),Object(function(){var e=Error("Cannot find module '@/lib/ranks'");throw e.code="MODULE_NOT_FOUND",e}()).map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.icon," ",e.name]},e.id))]})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:s,className:"flex-1 btn-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:x,className:"flex-1 btn-primary disabled:opacity-50",children:x?"Creating...":"Create Reward"})]})]})]})})}function p({profile:e}){let[s,t]=(0,a.useState)([]),[n,m]=(0,a.useState)([]),[p,b]=(0,a.useState)([]),[f,g]=(0,a.useState)([]),[j,N]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[w,O]=(0,a.useState)(!1),C=async()=>{let{data:s}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("profiles").select("*").eq("parent_id",e.id).eq("role","child");t(s||[]);let{data:r}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("chores").select("*").eq("parent_id",e.id);m(r||[]);let{data:a,error:n}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("chore_completions").select("*").eq("status","pending");console.log("All pending completions:",a);let o=[];if(a)for(let s of a){let{data:t}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("chores").select("title, points, parent_id").eq("id",s.chore_id).single(),{data:r}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("profiles").select("name").eq("id",s.child_id).single();t?.parent_id===e.id&&o.push({...s,chores:t,profiles:r})}console.log("Enriched completions for parent:",o),console.log("Parent ID:",e.id),console.log("Completions error:",n),b(o);let{data:i}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("rewards").select("*").eq("parent_id",e.id);g(i||[])},_=async(s,t,r)=>{try{console.log("Approving completion:",{completionId:s,childId:t,points:r});let{error:a}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("chore_completions").update({status:"approved",approved_at:new Date().toISOString(),approved_by:e.id}).eq("id",s);if(a)throw console.error("Error updating completion:",a),a;let{data:n,error:o}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("profiles").select("points, name").eq("id",t).single();if(o)throw console.error("Error fetching child:",o),o;if(n){let e=n.points+r,s=Object(function(){var e=Error("Cannot find module '@/lib/ranks'");throw e.code="MODULE_NOT_FOUND",e}())(e);console.log("Updating child:",{childId:t,oldPoints:n.points,newPoints:e,newRank:s.name});let{data:a,error:o}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("profiles").update({points:e,rank:s.id,updated_at:new Date().toISOString()}).eq("id",t).select();if(o)throw console.error("Error updating child profile:",o),o;console.log("Profile update result:",a);let{data:i}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("profiles").select("points, rank").eq("id",t).single();console.log("Verification query result:",i),alert(`✅ Approved! ${n.name} earned ${r} points and is now ${s.name}!`)}await C()}catch(e){console.error("Error approving completion:",e),alert(`Error approving chore: ${e instanceof Error?e.message:"Unknown error"}`)}},k=async s=>{try{await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("chore_completions").update({status:"rejected",approved_at:new Date().toISOString(),approved_by:e.id}).eq("id",s),C(),alert("❌ Chore completion rejected.")}catch(e){console.error("Error rejecting completion:",e),alert("Error rejecting chore. Please try again.")}};return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(o,{className:"w-8 h-8 text-army-600 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Children"}),r.jsx("p",{className:"text-2xl font-bold",children:s.length})]})]})}),r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(i,{className:"w-8 h-8 text-green-600 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Active Chores"}),r.jsx("p",{className:"text-2xl font-bold",children:n.length})]})]})}),r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(l,{className:"w-8 h-8 text-orange-600 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Pending Approvals"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:p.length})]})]})}),r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(d,{className:"w-8 h-8 text-yellow-600 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Rewards"}),r.jsx("p",{className:"text-2xl font-bold",children:f.length})]})]})})]}),"      ",(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsxs)("button",{onClick:()=>v(!0),className:"btn-primary flex items-center",children:[r.jsx(c,{className:"w-4 h-4 mr-2"}),"Add Child"]}),(0,r.jsxs)("button",{onClick:()=>N(!0),className:"btn-primary flex items-center",children:[r.jsx(c,{className:"w-4 h-4 mr-2"}),"Create Chore"]}),(0,r.jsxs)("button",{onClick:()=>O(!0),className:"btn-primary flex items-center",children:[r.jsx(c,{className:"w-4 h-4 mr-2"}),"Add Reward"]})]}),(0,r.jsxs)("div",{className:"card",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Your Children"}),0===s.length?r.jsx("p",{className:"text-gray-600",children:'No children added yet. Click "Add Child" to get started!'}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>{let s=Object(function(){var e=Error("Cannot find module '@/lib/ranks'");throw e.code="MODULE_NOT_FOUND",e}())(e.points);return(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-lg",children:e.name}),r.jsx("div",{className:"mt-2",children:(0,r.jsxs)("span",{className:`rank-badge ${s.color} text-white`,children:[s.icon," ",s.name]})}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[e.points," points"]})]},e.id)})})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["Pending Approvals (",p.length,")"]}),0===p.length?r.jsx("p",{className:"text-gray-600",children:"No pending approvals at the moment."}):r.jsx("div",{className:"space-y-3",children:p.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:e.chores?.title||"Unknown Chore"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Completed by ",e.profiles?.name||"Unknown Child"]}),(0,r.jsxs)("p",{className:"text-sm text-army-600 font-medium",children:["+",e.chores?.points||0," points"]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>_(e.id,e.child_id,e.chores?.points||0),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm",children:"✅ Approve"}),r.jsx("button",{onClick:()=>k(e.id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm",children:"❌ Reject"})]})]},e.id))})]}),y&&r.jsx(h,{parentId:e.id,onClose:()=>v(!1),onSuccess:()=>{v(!1),C()}}),j&&r.jsx(u,{parentId:e.id,children:s,onClose:()=>N(!1),onSuccess:()=>{N(!1),C()}}),w&&r.jsx(x,{parentId:e.id,onClose:()=>O(!1),onSuccess:()=>{O(!1),C()}})]})}(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/ranks'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/ranks'");throw e.code="MODULE_NOT_FOUND",e}();var b=t(3734);let f=(0,n.Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),g=(0,n.Z)("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),j=(0,n.Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),N=[{id:"superhero",name:"Superhero",icon:"\uD83E\uDDB8‍♂️"},{id:"robot",name:"Robot",icon:"\uD83E\uDD16"},{id:"wizard",name:"Wizard",icon:"\uD83E\uDDD9‍♂️"},{id:"pirate",name:"Pirate",icon:"\uD83C\uDFF4‍☠️"}],y=["Great job on completing your missions! You're becoming a true Chore Champion!","I'm proud of how responsible you're being. Keep up the excellent work!","You're making amazing progress! Your family is lucky to have such a helpful member.","Every chore you complete makes you stronger and more capable. You're doing fantastic!","I can see you're working hard to reach the next rank. You're almost there!"];function v({profile:e}){let[s,t]=(0,a.useState)("superhero"),[n,o]=(0,a.useState)(!1),[i,l]=(0,a.useState)(""),d=N.find(e=>e.id===s)||N[0];return(0,r.jsxs)("div",{className:"card bg-gradient-to-r from-blue-50 to-purple-50",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[r.jsx(f,{className:"w-6 h-6 text-blue-600 mr-2"}),r.jsx("h2",{className:"text-xl font-semibold",children:"AI Voice Coach"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose your coach:"}),r.jsx("div",{className:"flex space-x-2",children:N.map(e=>(0,r.jsxs)("button",{onClick:()=>t(e.id),className:`p-3 rounded-lg border-2 transition-colors ${s===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("div",{className:"text-2xl mb-1",children:e.icon}),r.jsx("div",{className:"text-xs font-medium",children:e.name})]},e.id))})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"text-3xl mr-3",children:d.icon}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-semibold",children:[d.name," Coach"]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Ready to encourage you!"})]})]}),r.jsx("button",{onClick:()=>{l(y[Math.floor(Math.random()*y.length)]),o(!0),setTimeout(()=>{o(!1)},3e3)},disabled:n,className:`flex items-center px-4 py-2 rounded-lg transition-colors ${n?"bg-gray-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:n?(0,r.jsxs)(r.Fragment,{children:[r.jsx(g,{className:"w-4 h-4 mr-2 animate-pulse"}),"Speaking..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(j,{className:"w-4 h-4 mr-2"}),"Get Encouragement"]})})]}),i&&r.jsx("div",{className:"p-4 bg-blue-100 rounded-lg border-l-4 border-blue-500",children:(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx("div",{className:"text-2xl mr-3",children:d.icon}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-medium text-blue-800 mb-1",children:[d.name," says:"]}),r.jsx("p",{className:"text-blue-700",children:i})]})]})}),r.jsx("div",{className:"text-xs text-gray-500 text-center",children:"\uD83D\uDCA1 Tip: Your AI coach can provide personalized encouragement and help you stay motivated!"})]})]})}function w({profile:e,onProfileUpdate:s}){let[t,n]=(0,a.useState)([]),[o,c]=(0,a.useState)([]),[m,u]=(0,a.useState)([]),[h,x]=(0,a.useState)(e),p=async()=>{console.log("Fetching profile data for ID:",e.id);let{data:t,error:r}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("profiles").select("*").eq("id",e.id).single();r?console.error("Error fetching profile:",r):(console.log("Previous profile data:",h),console.log("New profile data from DB:",t),t.points!==h.points&&console.log(`Points changed: ${h.points} → ${t.points}`),x(t),s&&s())},f=async()=>{let{data:e}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("chores").select("*").or(`assigned_to.is.null,assigned_to.eq.${h.id}`);n(e||[]);let{data:s}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("chore_completions").select(`
        *,
        chores (title, points)
      `).eq("child_id",h.id).order("completed_at",{ascending:!1});c(s||[]),Object(function(){var e=Error("Cannot find module '@/lib/ranks'");throw e.code="MODULE_NOT_FOUND",e}())(h.points);let{data:t}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("rewards").select("*").eq("parent_id",h.parent_id).lte("points_required",h.points);u(t||[])},g=async e=>{await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("chore_completions").insert({chore_id:e,child_id:h.id,status:"pending"}),f()},j=Object(function(){var e=Error("Cannot find module '@/lib/ranks'");throw e.code="MODULE_NOT_FOUND",e}())(h.points),N=Object(function(){var e=Error("Cannot find module '@/lib/ranks'");throw e.code="MODULE_NOT_FOUND",e}())(h.points),y=N?(h.points-j.pointsRequired)/(N.pointsRequired-j.pointsRequired)*100:100;return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-army-800 mb-2",children:["Welcome to your Mission Hub, ",h.name,"!"]}),(0,r.jsxs)("div",{className:"flex justify-center items-center space-x-4 mb-4",children:[(0,r.jsxs)("span",{className:`rank-badge ${j.color} text-white text-lg`,children:[j.icon," ",j.name]}),(0,r.jsxs)("span",{className:"text-xl font-semibold text-army-600",children:[h.points," Points"]})]}),r.jsx("button",{onClick:()=>{p(),f()},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm",children:"\uD83D\uDD04 Refresh Progress"})]}),(0,r.jsxs)("div",{className:"card",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Rank Progress"}),N?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("span",{className:"text-sm font-medium",children:["Progress to ",N.name]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[h.points," / ",N.pointsRequired," points"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:"bg-army-600 h-3 rounded-full transition-all duration-300",style:{width:`${y}%`}})}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:[N.pointsRequired-h.points," points to go!"]})]}):(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(d,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold",children:"Congratulations!"}),r.jsx("p",{className:"text-gray-600",children:"You've reached the highest rank!"})]})]}),r.jsx(v,{profile:h}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[r.jsx(b.Z,{className:"w-6 h-6 text-yellow-500 mr-2"}),"Available Missions"]}),0===t.length?r.jsx("p",{className:"text-gray-600",children:"No missions available right now. Check back later!"}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsx("h3",{className:"font-semibold text-lg",children:e.title}),r.jsx("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-army-600 font-semibold",children:["+",e.points," points"]}),r.jsx("button",{onClick:()=>g(e.id),className:"btn-primary text-sm",children:"Complete Mission"})]})]},e.id))})]}),"      ",m.length>0&&(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[r.jsx(d,{className:"w-6 h-6 text-yellow-500 mr-2"}),"Available Rewards"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-4 bg-yellow-50",children:[r.jsx("h3",{className:"font-semibold text-lg",children:e.title}),r.jsx("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-yellow-600 font-semibold",children:[e.points_required," points"]}),r.jsx("span",{className:"text-green-600 font-semibold",children:"✓ Unlocked!"})]})]},e.id))})]}),(0,r.jsxs)("div",{className:"card",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Recent Activity"}),0===o.length?r.jsx("p",{className:"text-gray-600",children:"No completed missions yet. Start your first mission above!"}):r.jsx("div",{className:"space-y-3",children:o.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center",children:["approved"===e.status?r.jsx(i,{className:"w-5 h-5 text-green-500 mr-3"}):r.jsx(l,{className:"w-5 h-5 text-yellow-500 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:e.chores?.title}),r.jsx("p",{className:"text-sm text-gray-600",children:"approved"===e.status?"Approved":"Waiting for approval"})]})]}),(0,r.jsxs)("span",{className:"text-army-600 font-semibold",children:["+",e.chores?.points," points"]})]},e.id))})]})]})}function O(){let[e,s]=(0,a.useState)(null),[t,n]=(0,a.useState)(null),[o,i]=(0,a.useState)(!0),l=async()=>{if(e){let{data:s}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("profiles").select("*").eq("id",e.id).single();n(s)}},d=async()=>{await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).auth.signOut()};return o?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"text-xl",children:"Loading..."})}):e&&t?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow-sm border-b",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-army-800",children:"Chore Champion"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:["Welcome, ",t.name,"!"]}),r.jsx("button",{onClick:d,className:"btn-secondary text-sm",children:"Sign Out"})]})]})}),r.jsx("main",{className:"container mx-auto px-4 py-8",children:"parent"===t.role?r.jsx(p,{profile:t}):r.jsx(w,{profile:t,onProfileUpdate:l})})]}):(window.location.href="/",null)}(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/lib/ranks'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()},6557:(e,s,t)=>{"use strict";t.d(s,{Z:()=>o});var r=t(7577),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),o=(e,s)=>{let t=(0,r.forwardRef)(({color:t="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:d="",children:c,...m},u)=>(0,r.createElement)("svg",{ref:u,...a,width:o,height:o,stroke:t,strokeWidth:l?24*Number(i)/Number(o):i,className:["lucide",`lucide-${n(e)}`,d].join(" "),...m},[...s.map(([e,s])=>(0,r.createElement)(e,s)),...Array.isArray(c)?c:[c]]));return t.displayName=`${e}`,t}},3734:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},9521:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`C:\Users\Clint\Documents\KiroCC\app\dashboard\page.tsx#default`)},1506:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i,metadata:()=>o});var r=t(9510),a=t(7366),n=t.n(a);t(7272),function(){var e=Error("Cannot find module '../lib/auth-context'");throw e.code="MODULE_NOT_FOUND",e}();let o={title:"Chore Champion",description:"Gamifying Family Chores"};function i({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:n().className,children:r.jsx(Object(function(){var e=Error("Cannot find module '../lib/auth-context'");throw e.code="MODULE_NOT_FOUND",e}()),{children:e})})})}},7272:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,82],()=>t(4407));module.exports=r})();